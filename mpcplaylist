#!/bin/bash

USER="root"
ADDRESS="192.168.1.7"
PATHREMOTE="/etc/mpd/Playlists"
PATHLOCAL="~/Downloads"
PLAYLIST="Smart.m3u"
SEDLOCAL="Users\/jakubtymejczyk"
SEDREMOTE="mnt\/samba"

tr '\r' '\n' < "$PATHLOCAL/$PLAYLIST" > "PATHLOCAL/$PLAYLIST.tmp"
cat "$PATHLOCAL/$PLAYLIST.tmp" | grep -v "^#" > "$PATHLOCAL/$PLAYLIST"
sed -e 's/$SEDLOCAL/$SEDREMOTE/g' "$PATHLOCAL/$PLAYLIST > "$PATHLOCAL/$PLAYLIST.tmp"
/usr/bin/iconv -f UTF8-MAC -t UTF8 < "$PATHLOCAL/$PLAYLIST" > "$PATHLOCAL/$PLAYLIST"

scp "$PATHLOCAL/$PLAYLIST" "$USER@$ADDRESS:$PATHREMOTE"

rm "$PATHLOCAL/$PLAYLIST" "$PATHLOCAL/$PLAYLIST.tmp"
